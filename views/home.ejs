<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Canteen - Logged In</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>
<body class="bg-white text-black">

<!-- Navbar -->
<header class="w-full bg-white shadow-md sticky top-0 z-50">
  <!-- Promo Message -->
  <div class="bg-yellow-400 text-white text-center py-2 text-sm tracking-wide uppercase">
    <i class="fas fa-clock mr-2 text-red-600"></i> Skip the queue Save Both Time & Money — Order from your desk and collect when ready!
  </div>

  <!-- Main Navbar -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-20">
      <!-- Logo -->
      <a href="/home" class="flex items-center gap-2">
        <img src="/images/logoCanteen.png" alt="Logo" class="h-12 object-contain">
      </a>

      <!-- Hamburger (Mobile) -->
      <button id="mobile-menu-button" class="md:hidden text-gray-700 hover:text-red-600 focus:outline-none">
        <i class="fas fa-bars text-2xl text-red-600"></i>
      </button>

      <!-- Desktop Navigation -->
      <nav id="desktop-menu" class="hidden md:flex gap-6 text-sm font-medium text-gray-700 items-center">
        <a href="/home" class="hover:text-red-600">Home</a>
        <a href="/orders" class="hover:text-red-600">My Orders</a>


        <!-- Menu Dropdown -->
        <div class="relative group">
          <button class="flex items-center gap-1 font-bold hover:text-red-600 transition">
            Menu <i class="fas fa-chevron-down text-xs ml-1"></i>
          </button>
          <div class="absolute left-0 mt-2 w-40 bg-white border border-gray-200 rounded shadow-lg hidden group-hover:block z-50">
            <a href="/menu" class="block px-4 py-2 hover:bg-red-50 hover:text-red-600">All</a>
            <a href="/menu/breakfast" class="block px-4 py-2 hover:bg-red-50 hover:text-red-600">Breakfast</a>
            <a href="/menu/lunch" class="block px-4 py-2 hover:bg-red-50 hover:text-red-600">Lunch</a>
            <a href="/menu/dinner" class="block px-4 py-2 hover:bg-red-50 hover:text-red-600">Dinner</a>
            <a href="/menu/snacks" class="block px-4 py-2 hover:bg-red-50 hover:text-red-600">Snacks</a>
            <a href="/menu/desserts" class="block px-4 py-2 hover:bg-red-50 hover:text-red-600">Desserts</a>
            <a href="/menu/specials" class="block px-4 py-2 hover:bg-red-50 hover:text-red-600">Specials</a>
          </div>
        </div>

        <!-- About Dropdown -->
        <div class="relative group">
          <button class="flex items-center gap-1 font-bold hover:text-red-600 transition">
            About Us <i class="fas fa-chevron-down text-xs ml-1"></i>
          </button>
          <div class="absolute left-0 mt-2 w-48 bg-white border border-gray-200 rounded shadow-lg hidden group-hover:block z-50">
            <a href="/about/developers" class="block px-4 py-2 hover:bg-red-50 hover:text-red-600">Developers Team</a>
            <a href="/about/company" class="block px-4 py-2 hover:bg-red-50 hover:text-red-600">Company</a>
            <a href="/contact" class="hover:text-red-600">Contact</a>
          </div>
        </div>
      </nav>

      <!-- Right Side (Search + User Info) -->
      <div class="hidden lg:flex items-center gap-4">
        <!-- Search -->
        <form action="/search" method="GET" class="relative w-72">
          <input type="text" name="search" placeholder="Search meals, drinks..." class="w-full pl-10 pr-4 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500" />
          <i class="fas fa-search absolute left-3 top-2.5 text-gray-400"></i>
        </form>

        <!-- Username -->
        <span class="text-sm font-medium text-gray-700">Welcome, <span class="text-red-600 font-semibold">Onwabe Zibeke</span></span>
          <!-- Cart Link -->
          <a href="/cart" class="hover:text-red-600 flex items-center gap-1 font-bold">
            <i class="fas fa-shopping-cart"></i> Cart (<%= cartCount || 0 %>)
          </a>
        <!-- Logout -->
        <a href="/logout" class="text-red-600 hover:text-red-800 text-sm font-bold flex items-center gap-1">
          <i class="fas fa-sign-out-alt"></i> Logout
        </a>
      </div>
    </div>

    <!-- Mobile Menu -->
    <nav id="mobile-menu" class="md:hidden hidden flex-col gap-4 py-4 border-t border-gray-200">
      <a href="/home" class="px-4 py-2 hover:bg-red-50 hover:text-red-600 flex items-center gap-2">
        <i class="fas fa-home"></i> Home
      </a>
      <a href="/orders" class="px-4 py-2 hover:bg-red-50 hover:text-red-600 flex items-center gap-2">
        <i class="fas fa-receipt"></i> My Orders
      </a>
      <a href="/track" class="px-4 py-2 hover:bg-red-50 hover:text-red-600 flex items-center gap-2">
        <i class="fas fa-map-marker-alt"></i> Track
      </a>
      <a href="/menu" class="px-4 py-2 hover:bg-red-50 hover:text-red-600 flex items-center gap-2">
        <i class="fas fa-utensils"></i> Menu
      </a>
      <a href="/contact" class="px-4 py-2 hover:bg-red-50 hover:text-red-600 flex items-center gap-2">
        <i class="fas fa-phone"></i> Contact
      </a>
      <form action="/search" method="GET" class="px-4 py-2">
        <input type="text" name="search" placeholder="Search meals, drinks..." class="w-full pl-10 pr-4 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500" />
      </form>
      <a href="/logout" class="px-4 py-2 text-red-600 hover:text-red-800 flex items-center gap-2">
        <i class="fas fa-sign-out-alt"></i> Logout
      </a>
    </nav>
  </div>
</header>

<!-- Carousel -->
<section class="max-w-7xl mx-auto my-6 px-4 sm:px-6 lg:px-2">
  <div class="relative">
    <div class="carousel overflow-hidden rounded-lg shadow-md relative">
      <div class="carousel-inner flex transition-transform duration-700 ease-in-out" style="width: 300%;">

      <!-- Slide 1: Order from Your Desk -->
      <div class="w-full flex flex-col md:flex-row items-center justify-between p-6 h-96"
          style="background: linear-gradient(to right, #dc2626 30%, #dc2626 50%, #ffffff 100%);">
        <!-- Text Section -->
        <div class="md:w-1/2 md:pr-10 text-center md:text-left">
          <h2 class="text-3xl font-bold text-white">Order from Your Desk</h2>
          <p class="mt-4 text-lg text-white">No more standing in line. Place your order online and collect it when it's ready.</p>
          
          <div class="mt-6 flex gap-4 justify-center md:justify-start">
            <!-- Button 1: Solid Yellow -->
            <a href="/menu" class="px-5 py-2 bg-yellow-400 text-red-700 font-semibold rounded hover:bg-yellow-500 transition">Order Now</a>

            <!-- Button 2: Yellow Border -->
            <a href="/offers" class="px-5 py-2 border-2 border-yellow-400 text-white font-semibold rounded hover:bg-yellow-400 hover:text-red-700 transition">See Offers</a>
          </div>
        </div>

        <!-- Image Section -->
        <div class="md:w-1/2">
          <img src="/images/item1.png" class="rounded-lg w-full max-h-80 object-contain" alt="Ordering from desk" />
        </div>
      </div>

        <!-- Slide 2: Real-Time Tracking -->
      <div class="w-full flex flex-col md:flex-row items-center justify-between p-6 h-96"
          style="background: linear-gradient(to right, #dc2626 30%, #dc2626 50%, #ffffff 100%);">
          <div class="md:w-1/2 md:pr-10 text-center md:text-left">
            <h2 class="text-3xl font-bold text-white">Track Your Order in Real Time</h2>
            <p class="mt-4 text-lg text-white">Keep an eye on your order status so you know exactly when it's ready for pickup — no guesswork.</p>
          <div class="mt-6 flex gap-4 justify-center md:justify-start">
            <!-- Button 1: Solid Yellow -->
            <a href="/menu" class="px-5 py-2 bg-yellow-400 text-red-700 font-semibold rounded hover:bg-yellow-500 transition">Order Now</a>

            <!-- Button 2: Yellow Border -->
            <a href="/offers" class="px-5 py-2 border-2 border-yellow-400 text-white font-semibold rounded hover:bg-yellow-400 hover:text-red-700 transition">See Offers</a>
          </div>
          </div>
          <div class="md:w-1/2 mt-6 md:mt-0">
            <img src="/images/item2.png" class="rounded-lg w-full max-h-80 object-contain" alt="Order Tracking" />
          </div>
        </div>

        <!-- Slide 3: Hot & Ready Pickup -->
      <div class="w-full flex flex-col md:flex-row items-center justify-between p-6 h-96"
          style="background: linear-gradient(to right, #dc2626 30%, #dc2626 50%, #ffffff 100%);">
          <div class="md:w-1/2 md:pr-10 text-center md:text-left">
            <h2 class="text-3xl font-bold text-white">Hot & Ready for Pickup</h2>
            <p class="mt-4 text-lg text-white">Your meal is freshly prepared and waiting — just head over when your status says ready.</p>
          <div class="mt-6 flex gap-4 justify-center md:justify-start">
            <!-- Button 1: Solid Yellow -->
            <a href="/menu" class="px-5 py-2 bg-yellow-400 text-red-700 font-semibold rounded hover:bg-yellow-500 transition">Order Now</a>

            <!-- Button 2: Yellow Border -->
            <a href="/offers" class="px-5 py-2 border-2 border-yellow-400 text-white font-semibold rounded hover:bg-yellow-400 hover:text-red-700 transition">See Offers</a>
          </div>
          </div>
          <div class="md:w-1/2 mt-6 md:mt-0">
            <img src="/images/item1.png" class="rounded-lg w-full max-h-80 object-contain" alt="Hot Food Ready for Pickup" />
          </div>
        </div>

      </div>
    </div>
  </div>
</section>

<!-- Main Content with Sidebar -->
<section id="menu" class="flex flex-1 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
  <!-- Sidebar -->
  <aside class="hidden md:block w-[18%] p-6 text-sm space-y-6">
    <div class="rounded-lg">
      <h3 class="text-lg font-semibold mb-6 text-gray-800">Filter by Category</h3>
      <ul class="space-y-3 text-sm font-medium text-gray-700">
        <li><a href="/menu/drinks" class="flex items-center gap-3 px-4 py-2 rounded hover:bg-red-50 hover:text-red-600"><i class="fas fa-glass-martini-alt text-red-500"></i> Drinks</a></li>
        <li><a href="/menu/breakfast" class="flex items-center gap-3 px-4 py-2 rounded hover:bg-red-50 hover:text-red-600"><i class="fas fa-hamburger text-red-500"></i> Breakfast</a></li>
        <li><a href="/menu/lunch" class="flex items-center gap-3 px-4 py-2 rounded hover:bg-red-50 hover:text-red-600"><i class="fas fa-hamburger text-red-500"></i> Lunch</a></li>
        <li><a href="/menu/snacks" class="flex items-center gap-3 px-4 py-2 rounded hover:bg-red-50 hover:text-red-600"><i class="fas fa-pizza-slice text-red-500"></i> Snacks</a></li>
        <li><a href="/menu/desserts" class="flex items-center gap-3 px-4 py-2 rounded hover:bg-red-50 hover:text-red-600"><i class="fas fa-ice-cream text-red-500"></i> Desserts</a></li>
        <li><a href="/menu/specials" class="flex items-center gap-3 px-4 py-2 rounded hover:bg-red-50 hover:text-red-600"><i class="fas fa-star text-red-500"></i> Specials</a></li>
      </ul>
    </div>
  </aside>

  <!-- Menu Grid -->
  <section class="flex-1 p-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
    <% if (items && items.length > 0) { %>
      <% items.forEach(item => { %>
        <div class="bg-white rounded-lg shadow hover:shadow-md border border-gray-100 hover:border-red-300 transition flex flex-col">
          <div class="flex items-center justify-center rounded-t-lg p-2">
            <img src="<%= item.image %>" alt="<%= item.name %>" class="max-h-36 object-contain" />
          </div>
          <div class="p-4 flex flex-col flex-grow">
            <h3 class="text-lg font-semibold text-gray-800"><%= item.name %></h3>
            <p class="text-sm text-gray-600 mt-1 h-16 overflow-hidden"><%= item.description %></p>
            <p class="text-red-600 font-bold mt-2">R <%= item.price %></p>
            <div class="flex justify-between mt-auto pt-4">
              <form action="/add-to-cart" method="POST">
                <input type="hidden" name="itemId" value="<%= item._id %>">
                <button type="submit" class="text-gray-700 border px-3 py-1 rounded hover:bg-gray-100">
                  <i class="fas fa-shopping-cart"></i> Cart
                </button>
              </form>
              <form action="/buy-now" method="POST">
                <input type="hidden" name="itemId" value="<%= item._id %>">
                <button type="submit" class="text-sm bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700">
                  Buy Now
                </button>
              </form>
            </div>
          </div>
        </div>
      <% }); %>
    <% } else { %>
      <p class="col-span-full text-center text-red-600 font-bold">No items available in this category.</p>
    <% } %>
  </section>
</section>

</body>
<!-- Carousel JavaScript -->
<script>
  const carouselInner = document.querySelector('.carousel-inner');
  const totalSlides = carouselInner.children.length;
  let currentSlide = 0;

  setInterval(() => {
    currentSlide = (currentSlide + 1) % totalSlides;
    carouselInner.style.transform = `translateX(-${currentSlide * (100 / totalSlides)}%)`;
  }, 6000); // 6 seconds per slide
</script>
  <script>
  // Mobile menu toggle (unchanged)
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  mobileMenuButton.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
  });

  // Mobile dropdown toggle (unchanged)
  const mobileDropdownBtn = document.getElementById('mobile-menu-dropdown-btn');
  const mobileDropdown = document.getElementById('mobile-dropdown');
  const dropdownIcon = document.getElementById('mobile-dropdown-icon');
  mobileDropdownBtn.addEventListener('click', () => {
    mobileDropdown.classList.toggle('hidden');
    dropdownIcon.classList.toggle('rotate-180');
  });

  // Desktop dropdown toggle helper function
  function setupDropdown(dropdownId, btnId, menuId, iconId) {
    const dropdownBtn = document.getElementById(btnId);
    const dropdownMenu = document.getElementById(menuId);
    const dropdownIcon = document.getElementById(iconId);

    // Close dropdown if clicked outside
    document.addEventListener('click', (e) => {
      if (!dropdownBtn.contains(e.target) && !dropdownMenu.contains(e.target)) {
        dropdownMenu.classList.add('hidden');
        dropdownBtn.setAttribute('aria-expanded', 'false');
        dropdownIcon.classList.remove('rotate-180');
      }
    });

    dropdownBtn.addEventListener('click', (e) => {
      e.preventDefault();
      const isHidden = dropdownMenu.classList.contains('hidden');
      if (isHidden) {
        dropdownMenu.classList.remove('hidden');
        dropdownBtn.setAttribute('aria-expanded', 'true');
        dropdownIcon.classList.add('rotate-180');
      } else {
        dropdownMenu.classList.add('hidden');
        dropdownBtn.setAttribute('aria-expanded', 'false');
        dropdownIcon.classList.remove('rotate-180');
      }
    });
  }

  setupDropdown('menu-dropdown', 'menu-dropdown-btn', 'menu-dropdown-menu', 'menu-dropdown-icon');
  setupDropdown('about-dropdown', 'about-dropdown-btn', 'about-dropdown-menu', 'about-dropdown-icon');
</script>
</html>

