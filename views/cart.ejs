<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Canteen - Landing Page</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />

  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>
<body class="bg-white text-black">

<!-- Navbar -->
<header class="w-full bg-white shadow-md sticky top-0 z-50">
  <!-- Promo Message -->
  <div class="bg-yellow-400 text-black text-center py-2 text-sm font-semibold tracking-wide uppercase">
    <i class="fas fa-clock mr-2 text-black"></i> Skip the queue Save Both Time & Money â€” Order from your desk and collect when ready!
  </div>

  <!-- Main Navbar -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-20">
      <!-- Logo -->
      <div class="flex items-center gap-2">
        <a href="/" class="flex items-center">
          <img 
            src="/images/logoCanteen.png" 
            alt="CCCI-CANTEEN Logo" 
            class="h-10 w-auto sm:h-14 md:h-16 object-contain"
          >
        </a>
      </div>

      <!-- Hamburger Button (Mobile) -->
      <button id="mobile-menu-button" class="md:hidden text-gray-700 hover:text-red-600 focus:outline-none">
      <i class="fas fa-bars text-2xl text-red-600 font-bold"></i>
      </button>

      <!-- Navigation Links -->
      <nav id="desktop-menu" class="hidden md:flex gap-8 text-sm font-medium text-gray-700 relative">
        <a href="/" class="hover:text-red-600 font-bold transition flex items-center gap-1">
           Home
        </a>


  <!-- Menu Dropdown -->
  <div class="relative" id="menu-dropdown">
    <button class="flex font-bold items-center gap-1 hover:text-red-600 transition focus:outline-none" aria-haspopup="true" aria-expanded="false" id="menu-dropdown-btn">
    </i> Menu <i class="fas fa-chevron-down text-xs ml-1 transition-transform" id="menu-dropdown-icon"></i>
    </button>
    <div class="absolute left-0 mt-2 w-40 bg-white border border-gray-200 rounded shadow-lg hidden z-50" id="menu-dropdown-menu" role="menu" aria-labelledby="menu-dropdown-btn">
      <a href="/home" class="block px-4 py-2 text-gray-700 hover:bg-red-50 hover:text-red-600" role="menuitem">All</a>
      <a href="/menu/breakfast" class="block px-4 py-2 text-gray-700 hover:bg-red-50 hover:text-red-600" role="menuitem">Breakfast</a>
      <a href="/menu/drinks" class="block px-4 py-2 text-gray-700 hover:bg-red-50 hover:text-red-600" role="menuitem">Drinks</a>
      <a href="/menu/lunch" class="block px-4 py-2 text-gray-700 hover:bg-red-50 hover:text-red-600" role="menuitem">Lunch</a>
      <a href="/menu/dinner" class="block px-4 py-2 text-gray-700 hover:bg-red-50 hover:text-red-600" role="menuitem">Dinner</a>
      <a href="/menu/snacks" class="block px-4 py-2 text-gray-700 hover:bg-red-50 hover:text-red-600" role="menuitem">Snacks</a>
      <a href="/menu/desserts" class="block px-4 py-2 text-gray-700 hover:bg-red-50 hover:text-red-600" role="menuitem">Desserts</a>
      <a href="/menu/specials" class="block px-4 py-2 text-gray-700 hover:bg-red-50 hover:text-red-600" role="menuitem">Specials</a>
    </div>
  </div>

  <!-- About Dropdown -->
  <div class="relative" id="about-dropdown">
    <button class="flex items-center font-bold gap-1 hover:text-red-600 transition focus:outline-none" aria-haspopup="true" aria-expanded="false" id="about-dropdown-btn">
    </i> About Us <i class="fas fa-chevron-down text-xs ml-1 transition-transform" id="about-dropdown-icon"></i>
    </button>
    <div class="absolute left-0 mt-2 w-48 bg-white border border-gray-200 rounded shadow-lg hidden z-50" id="about-dropdown-menu" role="menu" aria-labelledby="about-dropdown-btn">
      <a href="/about/developers" class="block px-4 py-2 text-gray-700 hover:bg-red-50 hover:text-red-600" role="menuitem">Developers Team</a>
      <a href="/about/company" class="block px-4 py-2 text-gray-700 hover:bg-red-50 hover:text-red-600" role="menuitem">Company</a>
    </div>
  </div>

  <a href="/contact" class="hover:text-red-600 font-bold transition flex items-center gap-1">
   Contact
  </a>
      </nav>

      <!-- Right Actions -->
      <div class="hidden lg:flex items-center gap-4">
        <form action="/search" method="GET" class="relative w-72">
          <input type="text" name="search" placeholder="Search meals, drinks..." class="w-full pl-10 pr-4 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500" />
          <i class="fas fa-search absolute left-3 top-2.5 text-gray-400"></i>
        </form>

        <a href="/login" class="px-4 py-2 text-sm font-bold rounded-md bg-red-600 text-white hover:text-black hover:bg-yellow-400  transition flex items-center gap-2">
          <i class="fas fa-sign-in-alt"></i> Login
        </a>
        <a href="/cart" class="px-4 py-2 border font-bold border-gray-300 text-sm font-medium text-gray-700 rounded hover:bg-gray-700 hover:text-white transition flex items-center gap-2">
          <i class="fas fa-shopping-cart"></i> Cart (<%= cartCount || 0 %>)
        </a>
      </div>
    </div>

    <!-- Mobile Menu (hidden by default) -->
    <nav id="mobile-menu" class="md:hidden hidden flex-col gap-4 py-4 border-t border-gray-200">
      <a href="/" class="px-4 py-2 hover:bg-red-50 hover:text-red-600 flex items-center gap-2">
        <i class="fas fa-home"></i> Home
      </a>

      <!-- Mobile Menu Dropdown -->
      <div>
        <button id="mobile-menu-dropdown-btn" class="w-full flex justify-between items-center px-4 py-2 hover:bg-red-50 hover:text-red-600 focus:outline-none">
          <span><i class="fas fa-hamburger mr-2"></i> Menu</span>
          <i id="mobile-dropdown-icon" class="fas fa-chevron-down transition-transform"></i>
        </button>
        <div id="mobile-dropdown" class="hidden flex-col mt-2 ml-6 space-y-2">
          <a href="/menu/drinks" class="px-4 py-2 hover:bg-red-50 hover:text-red-600 block rounded">Drinks</a>
          <a href="/menu/breakfast" class="px-4 py-2 hover:bg-red-50 hover:text-red-600 block rounded">Breakfast</a>
          <a href="/menu/lunch" class="px-4 py-2 hover:bg-red-50 hover:text-red-600 block rounded">Lunch</a>
          <a href="/menu/snacks" class="px-4 py-2 hover:bg-red-50 hover:text-red-600 block rounded">Snacks</a>
          <a href="/menu/desserts" class="px-4 py-2 hover:bg-red-50 hover:text-red-600 block rounded">Desserts</a>
          <a href="/menu/salads" class="px-4 py-2 hover:bg-red-50 hover:text-red-600 block rounded">Salads</a>
        </div>
      </div>

      <a href="/about" class="px-4 py-2 hover:bg-red-50 hover:text-red-600 flex items-center gap-2">
        <i class="fas fa-info-circle"></i> About Us
      </a>
      <a href="/contact" class="px-4 py-2 hover:bg-red-50 hover:text-red-600 flex items-center gap-2">
        <i class="fas fa-phone"></i> Contact
      </a>

      <form action="/search" method="GET" class="px-4 py-2">
        <input type="text" name="search" placeholder="Search meals, drinks..." class="w-full pl-10 pr-4 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500" />
      </form>

      <a href="/login" class="px-4 py-2 hover:bg-red-50 hover:text-red-600 flex items-center gap-2">
        <i class="fas fa-sign-in-alt"></i> Login
      </a>
      <a href="/cart" class="px-4 py-2 border border-gray-300 rounded flex items-center gap-2">
        <i class="fas fa-shopping-cart"></i> Cart (<%= cartCount || 0 %>)
      </a>
    </nav>
  </div>
</header>

  <div class="max-w-5xl mx-auto py-10 px-6">
    <!-- Header -->
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-red-600 flex items-center gap-3">
        <i class="fas fa-shopping-cart"></i> Your Cart
      </h1>
      <a href="/" class="mt-2 inline-block text-sm text-blue-600">
        <i class="fas fa-arrow-left"></i> Continue Shopping
      </a>
    </div>

    <!-- Cart Items -->
    <% if (cartItems && cartItems.length > 0) { %>
      <div class="bg-white rounded-lg p-6 space-y-6">
        <ul class="space-y-6" id="cart-items"><% 
  let totalAmount = 0;
  cartItems.forEach((item, index) => {
    const quantity = item.quantity || 1;
    const itemTotal = item.price * quantity;
    totalAmount += itemTotal;
%>
  <li class="flex gap-6 border-b pb-6 items-center" data-index="<%= index %>">
    <!-- Image -->
    <img src="<%= item.image %>" alt="<%= item.name %>" class="w-36 h-36 object-contain rounded-md border" />

    <!-- Item Details and Controls -->
    <div class="flex-1 flex flex-col gap-2">
      <div class="flex justify-between items-center">
        <h3 class="text-lg font-semibold"><%= item.name %></h3>
        <button class="text-red-500 hover:text-red-700 text-sm font-semibold remove-item">
          <i class="fas fa-trash-alt"></i> Remove
        </button>
      </div>
      <p class="text-sm text-gray-600"><%= item.description %></p>
      <p class="text-sm text-gray-500">Price: R <%= item.price.toFixed(2) %></p>

      <!-- Quantity Controls -->
      <div class="flex items-center gap-2 mt-2">
        <button 
          class="px-2 py-1 border rounded disabled:opacity-50 disabled:cursor-not-allowed decrease-qty" 
          <%= quantity <= 1 ? "disabled" : "" %>>
          <i class="fas fa-minus"></i>
        </button>
        <input 
          type="number" 
          min="1" 
          class="w-14 text-center border rounded quantity-input" 
          value="<%= quantity %>" />
        <button class="increase-qty px-2 py-1 border rounded">
          <i class="fas fa-plus"></i>
        </button>
      </div>
      <p class="text-sm mt-1 font-medium text-gray-700">Subtotal: R <span class="item-subtotal"><%= itemTotal.toFixed(2) %></span></p>
    </div>
  </li>
<% }) %>
</ul>

<!-- Total -->
<div class="text-right text-xl font-bold text-red-600 mt-4">
  Total: R <span id="cart-total"><%= totalAmount.toFixed(2) %></span>
</div>

        <div class="flex justify-between mt-6 gap-4 flex-wrap">
          <form action="/clear-cart" method="POST">
            <button type="submit" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded text-sm">
              <i class="fas fa-trash"></i> Clear Cart
            </button>
          </form>

          <% if (user) { %>
            <form action="/checkout" method="POST">
              <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-sm">
                <i class="fas fa-check-circle"></i> Checkout
              </button>
            </form>
          <% } else { %>
            <button onclick="showLoginModal()" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded text-sm">
              <i class="fas fa-sign-in-alt"></i> Login to Checkout
            </button>
          <% } %>
        </div>

        <% if (user) { %>
        <!-- Payment Method -->
        <div class="mt-8">
          <h3 class="text-lg font-semibold mb-3 text-gray-700">Choose Payment Method</h3>
          <form action="/pay" method="POST" class="flex items-center gap-4">
            <select name="paymentMethod" class="border border-gray-300 rounded px-3 py-2 text-sm">
              <option value="credit_card">Credit Card</option>
              <option value="paypal">PayPal</option>
            </select>
            <button type="submit" class="bg-black text-white px-4 py-2 rounded text-sm hover:bg-gray-800">
              <i class="fas fa-credit-card"></i> Pay
            </button>
          </form>
        </div>
        <% } %>
      </div>
    <% } else { %>
      <div class="bg-white p-8 rounded text-center">
        <p class="text-gray-500 text-lg"><i class="fas fa-info-circle text-red-500 mr-2"></i>Your cart is empty</p>
        <a href="/" class="mt-4 inline-block text-blue-600 hover:underline text-sm">
          Go back to shop
        </a>
      </div>
    <% } %>
  </div>

  <!-- Login Modal -->
  <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
    <div class="bg-white rounded-lg p-6 w-full max-w-sm shadow-lg">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-semibold text-gray-800"><i class="fas fa-sign-in-alt text-red-500 mr-2"></i> Login to Checkout</h2>
        <button onclick="closeLoginModal()" class="text-gray-500 hover:text-black text-2xl">&times;</button>
      </div>
      <form action="/login" method="POST" class="space-y-4">
        <div>
          <label class="block text-sm mb-1">Email</label>
          <input type="email" name="email" required class="w-full border px-3 py-2 rounded text-sm" placeholder="you@example.com" />
        </div>
        <div>
          <label class="block text-sm mb-1">Password</label>
          <input type="password" name="password" required class="w-full border px-3 py-2 rounded text-sm" placeholder="Your password" />
        </div>
        <button type="submit" class="w-full bg-red-600 text-white py-2 rounded hover:bg-red-700 transition">
          Login
        </button>
        <p class="text-sm text-center mt-2">
          Don't have an account? 
          <a href="/register" class="text-blue-600 hover:underline">Register</a>
        </p>
      </form>
    </div>
  </div>

  <script>
    function showLoginModal() {
      document.getElementById("loginModal").classList.remove("hidden");
    }

    function closeLoginModal() {
      document.getElementById("loginModal").classList.add("hidden");
    }

    window.onclick = function(event) {
      if (event.target == document.getElementById("loginModal")) {
        closeLoginModal();
      }
    }
  </script>
<script>
  // Mobile menu toggle (unchanged)
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  mobileMenuButton.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
  });

  // Mobile dropdown toggle (unchanged)
  const mobileDropdownBtn = document.getElementById('mobile-menu-dropdown-btn');
  const mobileDropdown = document.getElementById('mobile-dropdown');
  const dropdownIcon = document.getElementById('mobile-dropdown-icon');
  mobileDropdownBtn.addEventListener('click', () => {
    mobileDropdown.classList.toggle('hidden');
    dropdownIcon.classList.toggle('rotate-180');
  });

  // Desktop dropdown toggle helper function
  function setupDropdown(dropdownId, btnId, menuId, iconId) {
    const dropdownBtn = document.getElementById(btnId);
    const dropdownMenu = document.getElementById(menuId);
    const dropdownIcon = document.getElementById(iconId);

    // Close dropdown if clicked outside
    document.addEventListener('click', (e) => {
      if (!dropdownBtn.contains(e.target) && !dropdownMenu.contains(e.target)) {
        dropdownMenu.classList.add('hidden');
        dropdownBtn.setAttribute('aria-expanded', 'false');
        dropdownIcon.classList.remove('rotate-180');
      }
    });

    dropdownBtn.addEventListener('click', (e) => {
      e.preventDefault();
      const isHidden = dropdownMenu.classList.contains('hidden');
      if (isHidden) {
        dropdownMenu.classList.remove('hidden');
        dropdownBtn.setAttribute('aria-expanded', 'true');
        dropdownIcon.classList.add('rotate-180');
      } else {
        dropdownMenu.classList.add('hidden');
        dropdownBtn.setAttribute('aria-expanded', 'false');
        dropdownIcon.classList.remove('rotate-180');
      }
    });
  }

  setupDropdown('menu-dropdown', 'menu-dropdown-btn', 'menu-dropdown-menu', 'menu-dropdown-icon');
  setupDropdown('about-dropdown', 'about-dropdown-btn', 'about-dropdown-menu', 'about-dropdown-icon');
</script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const cartItems = document.getElementById("cart-items");
    const totalEl = document.getElementById("cart-total");

    function updateTotal() {
      let total = 0;
      cartItems.querySelectorAll("li").forEach(item => {
        const subtotal = parseFloat(item.querySelector(".item-subtotal").textContent);
        total += subtotal;
      });
      totalEl.textContent = total.toFixed(2);
    }

    cartItems.addEventListener("click", (e) => {
      const btn = e.target.closest("button");
      if (!btn) return;

      const itemEl = btn.closest("li");
      const qtyInput = itemEl.querySelector(".quantity-input");
      let quantity = parseInt(qtyInput.value) || 1;
      qtyInput.value = quantity; 
      const price = parseFloat(itemEl.querySelector("p.text-sm.text-gray-500").textContent.replace("Price: R ", ""));

      if (btn.classList.contains("increase-qty")) {
        quantity++;
      } else if (btn.classList.contains("decrease-qty") && quantity > 1) {
        quantity--;
      } else if (btn.classList.contains("remove-item")) {
        itemEl.remove();
        updateTotal();
        return;
      }

      qtyInput.value = quantity;
      itemEl.querySelector(".item-subtotal").textContent = (price * quantity).toFixed(2);
      updateTotal();

      // Update button state
      itemEl.querySelector(".decrease-qty").disabled = quantity <= 1;
    });

    // On initial load: fix all subtotals
    cartItems.querySelectorAll("li").forEach(item => {
      const qtyInput = item.querySelector(".quantity-input");
      const price = parseFloat(item.querySelector("p.text-sm.text-gray-500").textContent.replace("Price: R ", ""));
      const quantity = parseInt(qtyInput.value) || 1;

      qtyInput.value = quantity;
      item.querySelector(".item-subtotal").textContent = (price * quantity).toFixed(2);
      item.querySelector(".decrease-qty").disabled = quantity <= 1;
    });

    updateTotal();

  });
</script>

</body>
</html>



